<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>
<link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH4QQQEwksSS9ZWwAAAk1JREFUWMPtll2ITVEUx39nn/O7Y5qR8f05wtCUUr6ZIS++8pEnkZInPImneaCQ5METNdOkeFBKUhMPRIkHKfEuUZSUlGlKPN2TrgfncpvmnntnmlEyq1Z7t89/rf9a6+y99oZxGZf/XeIq61EdtgKXgdXA0xrYAvBjOIF1AI9zvjcC74BSpndrJPkBWDScTF8Aa4E3wDlgHbASaANmVqlcCnwHvgDvgVfAJ+AikAAvgfVZwLnSVZHZaOuKoQi3ZOMi4NkYkpe1p4J7A8BpYAD49hfIy/oqG0+hLomiKP2L5L+1ubn5115S+3OAn4EnwBlgMzCjyt6ZAnQCJ4A7wOs88iRJHvw50HoujuPBoCKwHWiosy8MdfZnAdcHk8dxXFJ3VQbQlCTJvRBCGdRbD4M6uc5glpY3eAihpN5S5w12diSEcCCEcKUO4ljdr15T76ur1FDDLIQQ3qv71EdDOe3Kxj3leRXyk+pxdWnFWod6Wt2bY3de3aSuUHcPBVimHs7mK9WrmeOF6lR1o9qnzskh2ar2qm1qizpfXaPeVGdlmGN5pb09qMxz1Xb1kLqgzn1RyH7JUXW52lr5e/Kqi9qpto7V1atuUzfnARrV7jEib1T76gG2qxdGmXyiekkt1GswPTtek0aBfJp6YySGBfWg2tPQ0FAYgf1stUfdmdcjarbYJEniKIq6gY/Aw+zWHAC+p2labGpqiorFYgGYCEzN7oQdQClN07O1/EfDyGgC0ALMBdYAi4FyK+4H3gLPsxfR1zRNi+NP7nH5J+QntnXe5B5mpfQAAAAASUVORK5CYII=">

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>src/nimutils/box</title>
<link rel="stylesheet" type="text/css" href="../nimdoc.out.css">

<script type="text/javascript" src="../dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }

  function switchTheme(e) {
      if (e.target.checked) {
          document.documentElement.setAttribute('data-theme', 'dark');
          localStorage.setItem('theme', 'dark');
      } else {
          document.documentElement.setAttribute('data-theme', 'light');
          localStorage.setItem('theme', 'light');
      }
  }

  const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
  if (toggleSwitch !== null) {
    toggleSwitch.addEventListener('change', switchTheme, false);
  }

  var currentTheme = localStorage.getItem('theme');
  if (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    currentTheme = 'dark';
  }
  if (currentTheme) {
    document.documentElement.setAttribute('data-theme', currentTheme);

    if (currentTheme === 'dark' && toggleSwitch !== null) {
      toggleSwitch.checked = true;
    }
  }
}

window.addEventListener('DOMContentLoaded', main);
</script>

</head>
<body>
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">src/nimutils/box</h1>
    <div class="row">
  <div class="three columns">
  <div class="theme-switch-wrapper">
    <label class="theme-switch" for="checkbox">
      <input type="checkbox" id="checkbox" />
      <div class="slider round"></div>
    </label>
    &nbsp;&nbsp;&nbsp; <em>Dark Mode</em>
  </div>
  <div id="global-links">
    <ul class="simple">
    <li>
      <a href="../theindex.html">Index</a>
    </li>
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Box"
    title="Box = ref object
  case kind*: MixedKind
  of MkFloat:
    f*: float64
  of MkInt:
    i*: int64
  of MkBool:
    b*: bool
  of MkStr:
    s*: string
  of MkSeq:
    c*: ListCrate
  of MkObj:
    o*: RootRef
  of MkTable:
    t: TableCrate">Box</a></li>
  <li><a class="reference" href="#MixedKind"
    title="MixedKind = enum
  MkInt, MkStr, MkFloat, MkSeq, MkBool, MkTable, MkObj">MixedKind</a></li>
  <li><a class="reference" href="#Packable"
    title="Packable = concept xvar v
    customPack(x) is Box
    customUnpack(type Box, v)">Packable</a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <ul class="simple nested-toc-section">$
      <li><a class="reference" href="#%24%2CBox"
    title="`$`(x: Box): string">`$`(x: Box): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">arrItemType
      <li><a class="reference" href="#arrItemType%2CBoxAtom"
    title="arrItemType(a: BoxAtom): BoxAtom">arrItemType(a: BoxAtom): BoxAtom</a></li>
  <li><a class="reference" href="#arrItemType%2CopenArray%5BT%5D"
    title="arrItemType[T](a: openArray[T]): auto">arrItemType[T](a: openArray[T]): auto</a></li>

  </ul>
  <ul class="simple nested-toc-section">boxToJson
      <li><a class="reference" href="#boxToJson%2CBox"
    title="boxToJson(b: Box): string">boxToJson(b: Box): string</a></li>

  </ul>
  <ul class="simple nested-toc-section">hash
      <li><a class="reference" href="#hash%2CBox"
    title="hash(box: Box): Hash">hash(box: Box): Hash</a></li>

  </ul>
  <ul class="simple nested-toc-section">pack
      <li><a class="reference" href="#pack%2CT"
    title="pack[T](x: T): Box">pack[T](x: T): Box</a></li>

  </ul>
  <ul class="simple nested-toc-section">unpack
      <li><a class="reference" href="#unpack%2CBox"
    title="unpack[T](box: Box): T">unpack[T](box: Box): T</a></li>
  <li><a class="reference" href="#unpack%2CBox%2CT"
    title="unpack[T](box: Box; result: var T)">unpack[T](box: Box; result: var T)</a></li>

  </ul>

  </ul>
</li>

</ul>

  </div>
  &nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L1"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L1" class="link-seesrc" target="_blank" >Edit</a>

  <div class="nine columns" id="content">
  <div id="tocRoot"></div>

  <p class="module-desc"><table class="docinfo" frame="void" rules="none"><col class="docinfo-name" /><col class="docinfo-content" /><tbody valign="top"><tr><th class="docinfo-name">Author:</th><td>John Viega (john@crashoverride.com)</td></tr>
<tr><th class="docinfo-name">Copyright:</th><td>2022</td></tr>
</tbody></table><p>This module is for generic boxing of values, which is useful for compiler symbol tables, etc. However, this is also a more flexible alternative to the nim Any type defined in std/typeinfo.  The major problem with Nim's Any type is that does not help the developer avoid danging pointers.  That is, if one uses an Any type in Nim, it uses a non-traced pointer, meaning that, if the container is the last reference to the object, then the object will end up dangling, meaning it will generally not be there when unboxing.</p>
<p>We solve that problem by holding an object reference for anything we want to keep around.  Most importantly, sequences go in a 'crate', which holds a copy of the sequence, ensuring any referencable object in the sequence is properly copied and tracked.</p>
<p>The current limitation relative to the Any type is that we currently are not explicitly handling the range of types that the Nim Any types does.  Specifically:</p>
<ul class="simple"><li>For primitive numeric types, the underlying storage is 64-bit values, that you can then cast into the type you expect. If you DO NOT know enough context to know, for instance, if the value is meant to be signed or not, and you need that context, you can stick it in an object wrapper.</li>
<li>You also need to use object wrappers for most complex Nim types like Tuples, Sets and so-on, since we don't intrinsically deal with them.</li>
</ul>
<p>Note that currently, there's no support for convering custom types to strings.</p>
<p>Thanks very much to ElegantBeef for helping me with my fight against type system recursion wonkiness... the little hack for decomposing list item types so I can recurse was due to him.</p>
<p>However, my major issue turned out to be that UFCS is ambiguous in the face of generics, and that ambiguity does not work out in favor of UFCS.  Specifically, foo.bar<a class="reference external" href="boz">Type</a> I believe becomes foo.bar<a class="reference external" href="boz">Type</a> instead of bar<a class="reference external" href="foo, boz">Type</a> (as would typically happen).</p>
<p>I did just learn that you can do [: instead to get UFCS semantics. But when you get it wrong, the error messages are not even a little helpful.</p>
</p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<div id="Box">
<dt><pre><a href="box.html#Box"><span class="Identifier">Box</span></a> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Keyword">object</span>
  <span class="Keyword">case</span> <span class="Identifier">kind</span><span class="Operator">*</span><span class="Other">:</span> <a href="box.html#MixedKind"><span class="Identifier">MixedKind</span></a>
  <span class="Keyword">of</span> <span class="Identifier">MkFloat</span><span class="Other">:</span>
    <span class="Identifier">f</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">float64</span>
  <span class="Keyword">of</span> <span class="Identifier">MkInt</span><span class="Other">:</span>
    <span class="Identifier">i</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">int64</span>
  <span class="Keyword">of</span> <span class="Identifier">MkBool</span><span class="Other">:</span>
    <span class="Identifier">b</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">bool</span>
  <span class="Keyword">of</span> <span class="Identifier">MkStr</span><span class="Other">:</span>
    <span class="Identifier">s</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">string</span>
  <span class="Keyword">of</span> <span class="Identifier">MkSeq</span><span class="Other">:</span>
    <span class="Identifier">c</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">ListCrate</span>
  <span class="Keyword">of</span> <span class="Identifier">MkObj</span><span class="Other">:</span>
    <span class="Identifier">o</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">RootRef</span>
  <span class="Keyword">of</span> <span class="Identifier">MkTable</span><span class="Other">:</span>
    <span class="Identifier">t</span><span class="Other">:</span> <span class="Identifier">TableCrate</span>
  </pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L62"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L62" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="MixedKind">
<dt><pre><a href="box.html#MixedKind"><span class="Identifier">MixedKind</span></a> <span class="Other">=</span> <span class="Keyword">enum</span>
  <span class="Identifier">MkInt</span><span class="Other">,</span> <span class="Identifier">MkStr</span><span class="Other">,</span> <span class="Identifier">MkFloat</span><span class="Other">,</span> <span class="Identifier">MkSeq</span><span class="Other">,</span> <span class="Identifier">MkBool</span><span class="Other">,</span> <span class="Identifier">MkTable</span><span class="Other">,</span> <span class="Identifier">MkObj</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L56"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L56" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="Packable">
<dt><pre><a href="box.html#Packable"><span class="Identifier">Packable</span></a> <span class="Other">=</span> <span class="Keyword">concept</span> <span class="Identifier">x</span><span class="Keyword">var</span> <span class="Identifier">v</span>
    <span class="Identifier">customPack</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">)</span> <span class="Identifier">is</span> <a href="box.html#Box"><span class="Identifier">Box</span></a>
    <span class="Identifier">customUnpack</span><span class="Other">(</span><span class="Identifier">type</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">,</span> <span class="Identifier">v</span><span class="Other">)</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L59"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L59" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<div id="$,Box">
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CBox"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L211"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L211" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="arrItemType,BoxAtom">
<dt><pre><span class="Keyword">proc</span> <a href="#arrItemType%2CBoxAtom"><span class="Identifier">arrItemType</span></a><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">BoxAtom</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">BoxAtom</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L83"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L83" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="arrItemType,openArray[T]">
<dt><pre><span class="Keyword">proc</span> <a href="#arrItemType%2CopenArray%5BT%5D"><span class="Identifier">arrItemType</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">a</span><span class="Other">:</span> <span class="Identifier">openArray</span><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">auto</span></pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L81"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L81" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="boxToJson,Box">
<dt><pre><span class="Keyword">proc</span> <a href="#boxToJson%2CBox"><span class="Identifier">boxToJson</span></a><span class="Other">(</span><span class="Identifier">b</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>


&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L239"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L239" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="hash,Box">
<dt><pre><span class="Keyword">proc</span> <a href="#hash%2CBox"><span class="Identifier">hash</span></a><span class="Other">(</span><span class="Identifier">box</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">Hash</span> {.<span><span class="Other pragmadots">...</span></span><span class="pragmawrap"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Identifier">ValueError</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span>.}</pre></dt>
<dd>

Allow boxes of primitive types to be used as hash table keys.
&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L157"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L157" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="pack,T">
<dt><pre><span class="Keyword">proc</span> <a href="#pack%2CT"><span class="Identifier">pack</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">T</span><span class="Other">)</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a></pre></dt>
<dd>

<p>This recursively boxes sequences and dicts down to an &quot;atomic&quot; type, which is currently primitives, tables, other boxes, and anything implementing our <tt class="docutils literal"><span class="pre"><span class="Identifier">Packable</span></span></tt> interface (called concepts in Nim... they bind on more than just function signatures.</p>
<p>This is better than holding references to objects that may or may not be boxed, especially since we have tuple types where boxing is currently necessary.</p>
<p>Generally with pack(), the compiler isn't going to have a problem figuring out the type to pack, so you shouldn't have to specify the parameter.</p>

&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L166"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L166" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unpack,Box">
<dt><pre><span class="Keyword">proc</span> <a href="#unpack%2CBox"><span class="Identifier">unpack</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">box</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">T</span></pre></dt>
<dd>

<p>This recursively unpacks anything sitting in a Box, including custom code via the <tt class="docutils literal"><span class="pre"><span class="Identifier">Packable</span></span></tt> interface.</p>
<p>Whereas with packing the compiler will generally find it easy to figure out the type of the object you're packing, with unpack(), you'll often be specifying the type manually (though, it can be inferred from the destination variable, if the language already knows that type).</p>
<p>If you do NOT want to unpack every layer at once, just declare the type of the destination variable appropriately. For instance, If you have boxed a <tt class="docutils literal"><span class="pre"><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">]</span><span class="Punctuation">]</span></span></tt>, calling <tt class="docutils literal"><span class="pre"><span class="Identifier">unpack</span><span class="Punctuation">[</span><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span></span></tt> removes both layers of packing, but calling <tt class="docutils literal"><span class="pre"><span class="Identifier">unpack</span><span class="Punctuation">[</span><span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">Box</span><span class="Punctuation">]</span><span class="Punctuation">]</span></span></tt> just one.</p>

&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L85"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L85" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>
<div id="unpack,Box,T">
<dt><pre><span class="Keyword">proc</span> <a href="#unpack%2CBox%2CT"><span class="Identifier">unpack</span></a><span class="Other">[</span><span class="Identifier">T</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">box</span><span class="Other">:</span> <a href="box.html#Box"><span class="Identifier">Box</span></a><span class="Other">;</span> <span class="Identifier">result</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">T</span><span class="Other">)</span></pre></dt>
<dd>

This really isn't necessary, but sometimes you might want to use a var param...
&nbsp;&nbsp;<a
href="https://github.com/crashappsec/nimutils.git/tree/v0.1.0/src/nimutils/box.nim#L151"
class="link-seesrc" target="_blank">Source</a>
&nbsp;&nbsp;<a href="https://github.com/crashappsec/nimutils.git/edit/devel/src/nimutils/box.nim#L151" class="link-seesrc" target="_blank" >Edit</a>

</dd>
</div>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small style="color: var(--hint);">Made with Nim. Generated: 2022-12-28 07:42:05 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
